@page
@model DropdownForCountries.Pages.ExampleModel

@{
    ViewData["Title"] = "Example";
}

<link rel="stylesheet" href="~/lib/limonte-sweetalert2/sweetalert2.min.css" />
<script src="lib/limonte-sweetalert2/sweetalert2.all.min.js"></script>

<div class="container">
    <form method="post">
        <input type="hidden" asp-for="ErrorMessage" id="errorMsg"/>
        <div class="row">
            <div class="col-md-3">
                <select id="selectCountries" name="Id" class="form-select" asp-items="@Model.CountryList">
                    <option value="0">--Select--</option>
                </select>
            </div>

            @* present message a country needs to be selected *@
            <div id="error" class="fw-bold text-danger">
                @{
                    @Model.ErrorMessage
                }
            </div>
        </div>

        <input type="hidden" name="Name" />

        <div class="row mt-2">
            <div class="col-6">
                <input type="submit" class="btn btn-primary" value="Submit" asp-page-handler="Submit" />
            </div>
            
        </div>
    </form>
    
</div>

@section Scripts
{
    <script type="text/javascript">
        window.onload = function() {
            
            let msg = $('#errorMsg').val();

            if (msg.length > 0) {

                const popupConfiguration = Swal.mixin({
                    customClass: {
                        confirmButton: 'btn btn-danger'
                    },
                    buttonsStyling: false
                });

                popupConfiguration.fire({
                    icon: '',
                    text: msg,
                    allowOutsideClick: false,
                    width: '200px',
                    height: '300px'
                });
            }

        };
    </script>

}